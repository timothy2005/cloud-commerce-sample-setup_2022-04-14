"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=124,exports.ids=[124],exports.modules={9124:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UserProfileModule:()=>UserProfileModule});var core=__webpack_require__(7716),common=__webpack_require__(8583),router=__webpack_require__(5987),spartacus_core=__webpack_require__(1018),spartacus_storefront=__webpack_require__(9667),BehaviorSubject=__webpack_require__(6215),Subscription=__webpack_require__(5319),combineLatest=__webpack_require__(9112),first=__webpack_require__(8049),tap=__webpack_require__(8307),map=__webpack_require__(8002),filter=__webpack_require__(5435),switchMap=__webpack_require__(3190),spartacus_user_profile_root=__webpack_require__(5594),fesm2015_forms=__webpack_require__(3679);function CloseAccountModalComponent_ng_container_0_div_9_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core.TgZ(1,"div",8),core._UZ(2,"cx-spinner"),core.qZA(),core.qZA())}function CloseAccountModalComponent_ng_container_0_ng_template_11_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"div",9),core.TgZ(1,"div",10),core.TgZ(2,"p",11),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.qZA(),core.TgZ(5,"div",10),core.TgZ(6,"div",12),core.TgZ(7,"button",13),core.NdJ("click",__name(function(){return core.CHM(_r5),core.oxw(2).closeAccount()},"CloseAccountModalComponent_ng_container_0_ng_template_11_Template_button_click_7_listener")),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA(),core.TgZ(10,"button",14),core.NdJ("click",__name(function(){return core.CHM(_r5),core.oxw(2).dismissModal()},"CloseAccountModalComponent_ng_container_0_ng_template_11_Template_button_click_10_listener")),core._uU(11),core.ALo(12,"cxTranslate"),core.qZA(),core.qZA(),core.qZA(),core.qZA()}2&rf&&(core.xp6(3),core.hij(" ",core.lcZ(4,3,"closeAccount.confirmAccountClosureMessage")," "),core.xp6(5),core.hij(" ",core.lcZ(9,5,"closeAccount.closeMyAccount")," "),core.xp6(3),core.hij(" ",core.lcZ(12,7,"common.cancel")," "))}function CloseAccountModalComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.ynx(0),core.TgZ(1,"div",1),core.TgZ(2,"h3",2),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core.TgZ(5,"button",3),core.NdJ("click",__name(function(){return core.CHM(_r8),core.oxw().dismissModal()},"CloseAccountModalComponent_ng_container_0_Template_button_click_5_listener")),core.ALo(6,"cxTranslate"),core.TgZ(7,"span",4),core._UZ(8,"cx-icon",5),core.qZA(),core.qZA(),core.qZA(),core.YNc(9,CloseAccountModalComponent_ng_container_0_div_9_Template,3,0,"div",6),core.ALo(10,"async"),core.YNc(11,CloseAccountModalComponent_ng_container_0_ng_template_11_Template,13,9,"ng-template",null,7,core.W1O),core.BQk()}if(2&rf){const _r2=core.MAs(12),ctx_r0=core.oxw();core.xp6(3),core.hij(" ",core.lcZ(4,5,"closeAccount.confirmAccountClosure")," "),core.xp6(2),core.uIk("aria-label",core.lcZ(6,7,"common.close")),core.xp6(3),core.Q6J("type",ctx_r0.iconTypes.CLOSE),core.xp6(1),core.Q6J("ngIf",core.lcZ(10,9,ctx_r0.isLoading$))("ngIfElse",_r2)}}__name(CloseAccountModalComponent_ng_container_0_div_9_Template,"CloseAccountModalComponent_ng_container_0_div_9_Template"),__name(CloseAccountModalComponent_ng_container_0_ng_template_11_Template,"CloseAccountModalComponent_ng_container_0_ng_template_11_Template"),__name(CloseAccountModalComponent_ng_container_0_Template,"CloseAccountModalComponent_ng_container_0_Template");const _c0=__name(function(){return{cxRoute:"home"}},"_c0");function ForgotPasswordComponent_cx_spinner_0_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner",7)}__name(ForgotPasswordComponent_cx_spinner_0_Template,"ForgotPasswordComponent_cx_spinner_0_Template");const _c1=__name(function(){return{cxRoute:"login"}},"_c1");function RegisterComponent_section_0_option_14_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",25),core._uU(1),core.qZA()),2&rf){const title_r5=ctx.$implicit;core.Q6J("value",title_r5.code),core.xp6(1),core.hij(" ",title_r5.name," ")}}function RegisterComponent_section_0_label_58_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"label"),core._UZ(1,"input",26),core.TgZ(2,"span",21),core._uU(3),core.qZA(),core.qZA()),2&rf){const anonymousConsent_r6=ctx.ngIf,ctx_r4=core.oxw(2);core.xp6(1),core.Q6J("checked",ctx_r4.isConsentGiven(anonymousConsent_r6.consent)),core.xp6(2),core.hij(" ",anonymousConsent_r6.template," ")}}__name(RegisterComponent_section_0_option_14_Template,"RegisterComponent_section_0_option_14_Template"),__name(RegisterComponent_section_0_label_58_Template,"RegisterComponent_section_0_label_58_Template");const _c2=__name(function(){return{cxRoute:"termsAndConditions"}},"_c2");function RegisterComponent_section_0_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"section",2),core.TgZ(1,"div",3),core.TgZ(2,"div",4),core.TgZ(3,"div",5),core.TgZ(4,"form",6),core.NdJ("ngSubmit",__name(function(){return core.CHM(_r8),core.oxw().submitForm()},"RegisterComponent_section_0_Template_form_ngSubmit_4_listener")),core.TgZ(5,"div",7),core.TgZ(6,"label"),core.TgZ(7,"span",8),core._uU(8),core.ALo(9,"cxTranslate"),core.qZA(),core.TgZ(10,"select",9),core.TgZ(11,"option",10),core._uU(12),core.ALo(13,"cxTranslate"),core.qZA(),core.YNc(14,RegisterComponent_section_0_option_14_Template,2,2,"option",11),core.ALo(15,"async"),core.qZA(),core.qZA(),core.qZA(),core.TgZ(16,"div",7),core.TgZ(17,"label"),core.TgZ(18,"span",8),core._uU(19),core.ALo(20,"cxTranslate"),core.qZA(),core._UZ(21,"input",12),core.ALo(22,"cxTranslate"),core._UZ(23,"cx-form-errors",13),core.qZA(),core.qZA(),core.TgZ(24,"div",7),core.TgZ(25,"label"),core.TgZ(26,"span",8),core._uU(27),core.ALo(28,"cxTranslate"),core.qZA(),core._UZ(29,"input",14),core.ALo(30,"cxTranslate"),core._UZ(31,"cx-form-errors",13),core.qZA(),core.qZA(),core.TgZ(32,"div",7),core.TgZ(33,"label"),core.TgZ(34,"span",8),core._uU(35),core.ALo(36,"cxTranslate"),core.qZA(),core._UZ(37,"input",15),core.ALo(38,"cxTranslate"),core._UZ(39,"cx-form-errors",13),core.qZA(),core.qZA(),core.TgZ(40,"div",7),core.TgZ(41,"label"),core.TgZ(42,"span",8),core._uU(43),core.ALo(44,"cxTranslate"),core.qZA(),core._UZ(45,"input",16),core.ALo(46,"cxTranslate"),core._UZ(47,"cx-form-errors",13),core.qZA(),core.qZA(),core.TgZ(48,"div",7),core.TgZ(49,"label"),core.TgZ(50,"span",8),core._uU(51),core.ALo(52,"cxTranslate"),core.qZA(),core._UZ(53,"input",17),core.ALo(54,"cxTranslate"),core._UZ(55,"cx-form-errors",13),core.qZA(),core.qZA(),core.TgZ(56,"div",7),core.TgZ(57,"div",18),core.YNc(58,RegisterComponent_section_0_label_58_Template,4,2,"label",19),core.ALo(59,"async"),core.qZA(),core.qZA(),core.TgZ(60,"div",7),core.TgZ(61,"div",18),core.TgZ(62,"label"),core._UZ(63,"input",20),core.TgZ(64,"span",21),core._uU(65),core.ALo(66,"cxTranslate"),core.TgZ(67,"a",22),core.ALo(68,"cxUrl"),core._uU(69),core.ALo(70,"cxTranslate"),core.qZA(),core.qZA(),core._UZ(71,"cx-form-errors",13),core.qZA(),core.qZA(),core.qZA(),core.TgZ(72,"button",23),core._uU(73),core.ALo(74,"cxTranslate"),core.qZA(),core.TgZ(75,"a",24),core.ALo(76,"cxUrl"),core._uU(77),core.ALo(78,"cxTranslate"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.xp6(4),core.Q6J("formGroup",ctx_r0.registerForm),core.xp6(4),core.Oqu(core.lcZ(9,27,"register.title")),core.xp6(4),core.hij(" ",core.lcZ(13,29,"register.selectTitle")," "),core.xp6(2),core.Q6J("ngForOf",core.lcZ(15,31,ctx_r0.titles$)),core.xp6(5),core.Oqu(core.lcZ(20,33,"register.firstName.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(22,35,"register.firstName.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("firstName")),core.xp6(4),core.Oqu(core.lcZ(28,37,"register.lastName.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(30,39,"register.lastName.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("lastName")),core.xp6(4),core.Oqu(core.lcZ(36,41,"register.emailAddress.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(38,43,"register.emailAddress.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("email")),core.xp6(4),core.Oqu(core.lcZ(44,45,"register.password.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(46,47,"register.password.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("password")),core.xp6(4),core.Oqu(core.lcZ(52,49,"register.confirmPassword.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(54,51,"register.confirmPassword.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("passwordconf")),core.xp6(3),core.Q6J("ngIf",core.lcZ(59,53,ctx_r0.anonymousConsent$)),core.xp6(7),core.hij(" ",core.lcZ(66,55,"register.confirmThatRead")," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(68,57,core.DdM(67,_c2))),core.xp6(2),core.hij(" ",core.lcZ(70,59,"register.termsAndConditions")," "),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("termsandconditions")),core.xp6(2),core.hij(" ",core.lcZ(74,61,"register.register")," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(76,63,core.DdM(68,_c1))),core.xp6(2),core.Oqu(core.lcZ(78,65,"register.signIn"))}}function RegisterComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",27),core._UZ(1,"cx-spinner"),core.qZA())}function ResetPasswordComponent_cx_spinner_0_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner",2)}function ResetPasswordComponent_form_2_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"form",3),core.NdJ("ngSubmit",__name(function(){const token_r2=core.CHM(_r4).ngIf;return core.oxw().onSubmit(token_r2)},"ResetPasswordComponent_form_2_Template_form_ngSubmit_0_listener")),core.TgZ(1,"label"),core.TgZ(2,"span",4),core._uU(3),core.ALo(4,"cxTranslate"),core.qZA(),core._UZ(5,"input",5),core.ALo(6,"cxTranslate"),core._UZ(7,"cx-form-errors",6),core.qZA(),core.TgZ(8,"label"),core.TgZ(9,"span",4),core._uU(10),core.ALo(11,"cxTranslate"),core.qZA(),core._UZ(12,"input",7),core.ALo(13,"cxTranslate"),core._UZ(14,"cx-form-errors",6),core.qZA(),core.TgZ(15,"button",8),core._uU(16),core.ALo(17,"cxTranslate"),core.qZA(),core.qZA()}if(2&rf){const ctx_r1=core.oxw();core.Q6J("formGroup",ctx_r1.form),core.xp6(3),core.Oqu(core.lcZ(4,9,"register.newPassword")),core.xp6(2),core.s9C("placeholder",core.lcZ(6,11,"register.password.placeholder")),core.xp6(2),core.Q6J("control",ctx_r1.form.get("password")),core.xp6(3),core.Oqu(core.lcZ(11,13,"register.passwordMinRequirements")),core.xp6(2),core.s9C("placeholder",core.lcZ(13,15,"register.confirmPassword.placeholder")),core.xp6(2),core.Q6J("control",ctx_r1.form.get("passwordConfirm")),core.xp6(1),core.Q6J("disabled",ctx_r1.form.disabled),core.xp6(1),core.hij(" ",core.lcZ(17,17,"register.resetPassword")," ")}}function UpdateEmailComponent_cx_spinner_0_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner",9)}function UpdatePasswordComponent_cx_spinner_0_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner",9)}function UpdateProfileComponent_cx_spinner_0_Template(rf,ctx){1&rf&&core._UZ(0,"cx-spinner",12)}function UpdateProfileComponent_option_11_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"option",13),core._uU(1),core.qZA()),2&rf){const title_r2=ctx.$implicit;core.Q6J("value",title_r2.code),core.xp6(1),core.hij(" ",title_r2.name," ")}}__name(RegisterComponent_section_0_Template,"RegisterComponent_section_0_Template"),__name(RegisterComponent_ng_template_2_Template,"RegisterComponent_ng_template_2_Template"),__name(ResetPasswordComponent_cx_spinner_0_Template,"ResetPasswordComponent_cx_spinner_0_Template"),__name(ResetPasswordComponent_form_2_Template,"ResetPasswordComponent_form_2_Template"),__name(UpdateEmailComponent_cx_spinner_0_Template,"UpdateEmailComponent_cx_spinner_0_Template"),__name(UpdatePasswordComponent_cx_spinner_0_Template,"UpdatePasswordComponent_cx_spinner_0_Template"),__name(UpdateProfileComponent_cx_spinner_0_Template,"UpdateProfileComponent_cx_spinner_0_Template"),__name(UpdateProfileComponent_option_11_Template,"UpdateProfileComponent_option_11_Template");class CloseAccountModalComponent{constructor(modalService,authService,globalMessageService,routingService,translationService,userProfile){this.modalService=modalService,this.authService=authService,this.globalMessageService=globalMessageService,this.routingService=routingService,this.translationService=translationService,this.userProfile=userProfile,this.iconTypes=spartacus_storefront.e1G,this.isLoading$=new BehaviorSubject.X(!1)}ngOnInit(){this.isLoggedIn$=this.authService.isUserLoggedIn()}onSuccess(){this.dismissModal(),this.translationService.translate("closeAccount.accountClosedSuccessfully").pipe((0,first.P)()).subscribe(text=>{this.globalMessageService.add(text,spartacus_core.xUg.MSG_TYPE_CONFIRMATION)}),this.routingService.go({cxRoute:"home"})}onError(){this.dismissModal(),this.translationService.translate("closeAccount.accountClosedFailure").pipe((0,first.P)()).subscribe(text=>{this.globalMessageService.add(text,spartacus_core.xUg.MSG_TYPE_ERROR)})}dismissModal(reason){this.modalService.dismissActiveModal(reason)}closeAccount(){this.isLoading$.next(!0),this.userProfile.close().subscribe({next:()=>{this.onSuccess(),this.isLoading$.next(!1)},error:()=>{this.onError(),this.isLoading$.next(!1)}})}}__name(CloseAccountModalComponent,"CloseAccountModalComponent"),CloseAccountModalComponent.\u0275fac=__name(function(t){return new(t||CloseAccountModalComponent)(core.Y36(spartacus_storefront.Z7U),core.Y36(spartacus_core.e80),core.Y36(spartacus_core.IWp),core.Y36(spartacus_core.Znh),core.Y36(spartacus_core.D7D),core.Y36(spartacus_user_profile_root.aT))},"CloseAccountModalComponent_Factory"),CloseAccountModalComponent.\u0275cmp=core.Xpm({type:CloseAccountModalComponent,selectors:[["cx-close-account-modal"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"modal-header","cx-dialog-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[3,"type"],[4,"ngIf","ngIfElse"],["loaded",""],[1,"cx-spinner"],[1,"modal-body"],[1,"cx-row"],[1,"cx-confirmation"],[1,"cx-btn-group"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-block","btn-secondary",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,CloseAccountModalComponent_ng_container_0_Template,13,11,"ng-container",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngIf",core.lcZ(1,1,ctx.isLoggedIn$))},"CloseAccountModalComponent_Template"),directives:[common.O5,spartacus_storefront.oJW,spartacus_storefront.ORR],pipes:[common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class CloseAccountComponent{constructor(modalService){this.modalService=modalService}openModal(){this.modal=this.modalService.open(CloseAccountModalComponent,{centered:!0}).componentInstance}}__name(CloseAccountComponent,"CloseAccountComponent"),CloseAccountComponent.\u0275fac=__name(function(t){return new(t||CloseAccountComponent)(core.Y36(spartacus_storefront.Z7U))},"CloseAccountComponent_Factory"),CloseAccountComponent.\u0275cmp=core.Xpm({type:CloseAccountComponent,selectors:[["cx-close-account"]],decls:11,vars:10,consts:[[1,"col-lg-8","col-md-9"],[1,"row","cx-btn-group"],[1,"col-sm-3"],[1,"btn","btn-block","btn-secondary",3,"routerLink"],[1,"col-sm-6"],[1,"btn","btn-primary",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.TgZ(1,"div",1),core.TgZ(2,"div",2),core.TgZ(3,"a",3),core.ALo(4,"cxUrl"),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core.qZA(),core.TgZ(7,"div",4),core.TgZ(8,"button",5),core.NdJ("click",__name(function(){return ctx.openModal()},"CloseAccountComponent_Template_button_click_8_listener")),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA(),core.qZA(),core.qZA(),core.qZA()),2&rf&&(core.xp6(3),core.Q6J("routerLink",core.lcZ(4,3,core.DdM(9,_c0))),core.xp6(2),core.Oqu(core.lcZ(6,5,"common.cancel")),core.xp6(4),core.hij(" ",core.lcZ(10,7,"closeAccount.closeMyAccount")," "))},"CloseAccountComponent_Template"),directives:[router.yS],pipes:[spartacus_core.l2T,spartacus_core.X$D],encapsulation:2,changeDetection:0});class CloseAccountModule{}__name(CloseAccountModule,"CloseAccountModule"),CloseAccountModule.\u0275fac=__name(function(t){return new(t||CloseAccountModule)},"CloseAccountModule_Factory"),CloseAccountModule.\u0275mod=core.oAB({type:CloseAccountModule}),CloseAccountModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{CloseAccountComponent:{component:CloseAccountComponent,guards:[spartacus_core.a1M]}}})],imports:[[common.ez,router.Bz,spartacus_core.bhT,spartacus_core.LUR,spartacus_storefront.QX1,spartacus_storefront.Fme]]});class ForgotPasswordComponentService{constructor(userPasswordService,routingService,authConfigService,globalMessage){this.userPasswordService=userPasswordService,this.routingService=routingService,this.authConfigService=authConfigService,this.globalMessage=globalMessage,this.busy$=new BehaviorSubject.X(!1),this.isUpdating$=this.busy$.pipe((0,tap.b)(state=>!0===state?this.form.disable():this.form.enable())),this.form=new fesm2015_forms.cw({userEmail:new fesm2015_forms.NI("",[fesm2015_forms.kI.required,spartacus_storefront.kal.emailValidator])})}requestEmail(){this.form.valid?(this.busy$.next(!0),this.userPasswordService.requestForgotPasswordEmail(this.form.value.userEmail).subscribe({next:()=>this.onSuccess(),error:error=>this.onError(error)})):this.form.markAllAsTouched()}onSuccess(){this.globalMessage.add({key:"forgottenPassword.passwordResetEmailSent"},spartacus_core.xUg.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset(),this.redirect()}onError(_error){this.busy$.next(!1)}redirect(){this.authConfigService.getOAuthFlow()===spartacus_core.C8C.ResourceOwnerPasswordFlow&&this.routingService.go({cxRoute:"login"})}}__name(ForgotPasswordComponentService,"ForgotPasswordComponentService"),ForgotPasswordComponentService.\u0275fac=__name(function(t){return new(t||ForgotPasswordComponentService)(core.LFG(spartacus_user_profile_root.LL),core.LFG(spartacus_core.Znh),core.LFG(spartacus_core.dSP),core.LFG(spartacus_core.IWp))},"ForgotPasswordComponentService_Factory"),ForgotPasswordComponentService.\u0275prov=core.Yz7({token:ForgotPasswordComponentService,factory:ForgotPasswordComponentService.\u0275fac});class ForgotPasswordComponent{constructor(service){this.service=service,this.form=this.service.form,this.isUpdating$=this.service.isUpdating$}onSubmit(){this.service.requestEmail()}}__name(ForgotPasswordComponent,"ForgotPasswordComponent"),ForgotPasswordComponent.\u0275fac=__name(function(t){return new(t||ForgotPasswordComponent)(core.Y36(ForgotPasswordComponentService))},"ForgotPasswordComponent_Factory"),ForgotPasswordComponent.\u0275cmp=core.Xpm({type:ForgotPasswordComponent,selectors:[["cx-forgot-password"]],decls:17,vars:22,consts:[["class","overlay",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"label-content"],["type","email","formControlName","userEmail",1,"form-control",3,"placeholder"],[3,"control"],[1,"btn","btn-block","btn-secondary",3,"routerLink"],[1,"btn","btn-block","btn-primary",3,"disabled"],[1,"overlay"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ForgotPasswordComponent_cx_spinner_0_Template,1,0,"cx-spinner",0),core.ALo(1,"async"),core.TgZ(2,"form",1),core.NdJ("ngSubmit",__name(function(){return ctx.onSubmit()},"ForgotPasswordComponent_Template_form_ngSubmit_2_listener")),core.TgZ(3,"label"),core.TgZ(4,"span",2),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core._UZ(7,"input",3),core.ALo(8,"cxTranslate"),core._UZ(9,"cx-form-errors",4),core.qZA(),core.TgZ(10,"a",5),core.ALo(11,"cxUrl"),core._uU(12),core.ALo(13,"cxTranslate"),core.qZA(),core.TgZ(14,"button",6),core._uU(15),core.ALo(16,"cxTranslate"),core.qZA(),core.qZA()),2&rf&&(core.Q6J("ngIf",core.lcZ(1,9,ctx.isUpdating$)),core.xp6(2),core.Q6J("formGroup",ctx.form),core.xp6(3),core.Oqu(core.lcZ(6,11,"forgottenPassword.emailAddress.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(8,13,"forgottenPassword.emailAddress.placeholder")),core.xp6(2),core.Q6J("control",ctx.form.get("userEmail")),core.xp6(1),core.Q6J("routerLink",core.lcZ(11,15,core.DdM(21,_c1))),core.xp6(2),core.Oqu(core.lcZ(13,17,"common.cancel")),core.xp6(2),core.Q6J("disabled",ctx.form.disabled),core.xp6(1),core.hij(" ",core.lcZ(16,19,"common.submit")," "))},"ForgotPasswordComponent_Template"),directives:[common.O5,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.u,spartacus_storefront.Ahv,router.yS,spartacus_storefront.ORR],pipes:[common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class ForgotPasswordModule{}__name(ForgotPasswordModule,"ForgotPasswordModule"),ForgotPasswordModule.\u0275fac=__name(function(t){return new(t||ForgotPasswordModule)},"ForgotPasswordModule_Factory"),ForgotPasswordModule.\u0275mod=core.oAB({type:ForgotPasswordModule}),ForgotPasswordModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ForgotPasswordComponent:{component:ForgotPasswordComponent,guards:[spartacus_core.aOY],providers:[{provide:ForgotPasswordComponentService,useClass:ForgotPasswordComponentService,deps:[spartacus_user_profile_root.LL,spartacus_core.Znh,spartacus_core.dSP,spartacus_core.IWp]}]}}})],imports:[[common.ez,fesm2015_forms.UX,router.Bz,spartacus_core.bhT,spartacus_core.LUR,spartacus_storefront.Fym,spartacus_storefront.Fme]]});class RegisterComponent{constructor(userRegister,globalMessageService,fb,router2,anonymousConsentsService,anonymousConsentsConfig,authConfigService){this.userRegister=userRegister,this.globalMessageService=globalMessageService,this.fb=fb,this.router=router2,this.anonymousConsentsService=anonymousConsentsService,this.anonymousConsentsConfig=anonymousConsentsConfig,this.authConfigService=authConfigService,this.isLoading$=new BehaviorSubject.X(!1),this.subscription=new Subscription.w,this.registerForm=this.fb.group({titleCode:[""],firstName:["",fesm2015_forms.kI.required],lastName:["",fesm2015_forms.kI.required],email:["",[fesm2015_forms.kI.required,spartacus_storefront.kal.emailValidator]],password:["",[fesm2015_forms.kI.required,spartacus_storefront.kal.passwordValidator]],passwordconf:["",fesm2015_forms.kI.required],newsletter:new fesm2015_forms.NI({value:!1,disabled:this.isConsentRequired()}),termsandconditions:[!1,fesm2015_forms.kI.requiredTrue]},{validators:spartacus_storefront.kal.passwordsMustMatch("password","passwordconf")})}ngOnInit(){var _a,_b,_c;this.titles$=this.userRegister.getTitles().pipe((0,map.U)(titles=>titles.sort(spartacus_storefront.ke7))),this.subscription.add(this.globalMessageService.get().pipe((0,filter.h)(messages=>!!Object.keys(messages).length)).subscribe(globalMessageEntities=>{const messages=globalMessageEntities&&globalMessageEntities[spartacus_core.xUg.MSG_TYPE_ERROR];messages&&messages.some(message=>"This field is required."===message)&&(this.globalMessageService.remove(spartacus_core.xUg.MSG_TYPE_ERROR),this.globalMessageService.add({key:"register.titleRequired"},spartacus_core.xUg.MSG_TYPE_ERROR))}));const registerConsent=null!==(_c=null===(_b=null===(_a=this.anonymousConsentsConfig)||void 0===_a?void 0:_a.anonymousConsents)||void 0===_b?void 0:_b.registerConsent)&&void 0!==_c?_c:"";this.anonymousConsent$=(0,combineLatest.aj)([this.anonymousConsentsService.getConsent(registerConsent),this.anonymousConsentsService.getTemplate(registerConsent)]).pipe((0,map.U)(([consent,template])=>({consent,template:(null==template?void 0:template.description)?template.description:""}))),this.subscription.add(this.registerForm.get("newsletter").valueChanges.subscribe(()=>{this.toggleAnonymousConsent()}))}submitForm(){this.registerForm.valid?this.registerUser():this.registerForm.markAllAsTouched()}registerUser(){this.isLoading$.next(!0),this.userRegister.register(this.collectDataFromRegisterForm(this.registerForm.value)).subscribe({next:()=>this.onRegisterUserSuccess(),complete:()=>this.isLoading$.next(!1)})}titleSelected(title){this.registerForm.controls.titleCode.setValue(title.code)}collectDataFromRegisterForm(formData){const{firstName,lastName,email,password,titleCode}=formData;return{firstName,lastName,uid:email.toLowerCase(),password,titleCode}}isConsentGiven(consent){return this.anonymousConsentsService.isConsentGiven(consent)}isConsentRequired(){var _a,_b,_c,_d;const requiredConsents=null===(_b=null===(_a=this.anonymousConsentsConfig)||void 0===_a?void 0:_a.anonymousConsents)||void 0===_b?void 0:_b.requiredConsents,registerConsent=null===(_d=null===(_c=this.anonymousConsentsConfig)||void 0===_c?void 0:_c.anonymousConsents)||void 0===_d?void 0:_d.registerConsent;return!(!requiredConsents||!registerConsent)&&requiredConsents.includes(registerConsent)}onRegisterUserSuccess(){this.authConfigService.getOAuthFlow()===spartacus_core.C8C.ResourceOwnerPasswordFlow&&this.router.go("login"),this.globalMessageService.add({key:"register.postRegisterMessage"},spartacus_core.xUg.MSG_TYPE_CONFIRMATION)}toggleAnonymousConsent(){var _a,_b;const registerConsent=null===(_b=null===(_a=this.anonymousConsentsConfig)||void 0===_a?void 0:_a.anonymousConsents)||void 0===_b?void 0:_b.registerConsent;registerConsent&&(Boolean(this.registerForm.get("newsletter").value)?this.anonymousConsentsService.giveConsent(registerConsent):this.anonymousConsentsService.withdrawConsent(registerConsent))}ngOnDestroy(){this.subscription.unsubscribe()}}__name(RegisterComponent,"RegisterComponent"),RegisterComponent.\u0275fac=__name(function(t){return new(t||RegisterComponent)(core.Y36(spartacus_user_profile_root.zm),core.Y36(spartacus_core.IWp),core.Y36(fesm2015_forms.qu),core.Y36(spartacus_core.Znh),core.Y36(spartacus_core.NpW),core.Y36(spartacus_core.k0m),core.Y36(spartacus_core.dSP))},"RegisterComponent_Factory"),RegisterComponent.\u0275cmp=core.Xpm({type:RegisterComponent,selectors:[["cx-register"]],decls:4,vars:4,consts:[["class","cx-page-section container",4,"ngIf","ngIfElse"],["loading",""],[1,"cx-page-section","container"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"cx-section"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"label-content"],["formControlName","titleCode",1,"form-control"],["selected","","value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","text","name","firstname","formControlName","firstName",1,"form-control",3,"placeholder"],[3,"control"],["type","text","name","lastname","formControlName","lastName",1,"form-control",3,"placeholder"],["type","email","name","email","formControlName","email",1,"form-control",3,"placeholder"],["type","password","name","password","formControlName","password",1,"form-control",3,"placeholder"],["type","password","name","confirmpassword","formControlName","passwordconf",1,"form-control",3,"placeholder"],[1,"form-check"],[4,"ngIf"],["type","checkbox","name","termsandconditions","formControlName","termsandconditions"],[1,"form-check-label"],["target","_blank",3,"routerLink"],["type","submit",1,"btn","btn-block","btn-primary"],[1,"cx-login-link","btn-link",3,"routerLink"],[3,"value"],["type","checkbox","name","newsletter","formControlName","newsletter",1,"form-check-input",3,"checked"],[1,"cx-spinner"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,RegisterComponent_section_0_Template,79,69,"section",0),core.ALo(1,"async"),core.YNc(2,RegisterComponent_ng_template_2_Template,2,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",!core.lcZ(1,2,ctx.isLoading$))("ngIfElse",_r1)}},"RegisterComponent_Template"),directives:[common.O5,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.EJ,fesm2015_forms.JJ,fesm2015_forms.u,fesm2015_forms.YN,fesm2015_forms.Kr,common.sg,fesm2015_forms.Fj,spartacus_storefront.Ahv,fesm2015_forms.Wl,router.yS,spartacus_storefront.ORR],pipes:[common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2});class RegisterComponentModule{}__name(RegisterComponentModule,"RegisterComponentModule"),RegisterComponentModule.\u0275fac=__name(function(t){return new(t||RegisterComponentModule)},"RegisterComponentModule_Factory"),RegisterComponentModule.\u0275mod=core.oAB({type:RegisterComponentModule}),RegisterComponentModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{RegisterCustomerComponent:{component:RegisterComponent,guards:[spartacus_core.aOY]}}})],imports:[[common.ez,fesm2015_forms.UX,router.Bz,spartacus_core.bhT,spartacus_core.LUR,spartacus_storefront.Fme,spartacus_storefront.Fym]]});class ResetPasswordComponentService{constructor(userPasswordService,routingService,globalMessage){this.userPasswordService=userPasswordService,this.routingService=routingService,this.globalMessage=globalMessage,this.busy$=new BehaviorSubject.X(!1),this.isUpdating$=this.busy$.pipe((0,tap.b)(state=>!0===state?this.form.disable():this.form.enable())),this.resetToken$=this.routingService.getRouterState().pipe((0,map.U)(routerState=>routerState.state.queryParams.token)),this.form=new fesm2015_forms.cw({password:new fesm2015_forms.NI("",[fesm2015_forms.kI.required,spartacus_storefront.kal.passwordValidator]),passwordConfirm:new fesm2015_forms.NI("",fesm2015_forms.kI.required)},{validators:spartacus_storefront.kal.passwordsMustMatch("password","passwordConfirm")})}resetPassword(token){if(!this.form.valid)return void this.form.markAllAsTouched();this.busy$.next(!0);const password=this.form.get("password").value;this.userPasswordService.reset(token,password).subscribe({next:()=>this.onSuccess(),error:error=>this.onError(error)})}onSuccess(){this.globalMessage.add({key:"forgottenPassword.passwordResetSuccess"},spartacus_core.xUg.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset(),this.redirect()}onError(error){var _a,_b;this.busy$.next(!1),(null!==(_b=null===(_a=error)||void 0===_a?void 0:_a.details)&&void 0!==_b?_b:[]).forEach(err=>{err.message&&this.globalMessage.add({raw:err.message},spartacus_core.xUg.MSG_TYPE_ERROR)})}redirect(){this.routingService.go({cxRoute:"login"})}}__name(ResetPasswordComponentService,"ResetPasswordComponentService"),ResetPasswordComponentService.\u0275fac=__name(function(t){return new(t||ResetPasswordComponentService)(core.LFG(spartacus_user_profile_root.LL),core.LFG(spartacus_core.Znh),core.LFG(spartacus_core.IWp))},"ResetPasswordComponentService_Factory"),ResetPasswordComponentService.\u0275prov=core.Yz7({token:ResetPasswordComponentService,factory:ResetPasswordComponentService.\u0275fac});class ResetPasswordComponent{constructor(service){this.service=service,this.form=this.service.form,this.isUpdating$=this.service.isUpdating$,this.token$=this.service.resetToken$}onSubmit(token){this.service.resetPassword(token)}}__name(ResetPasswordComponent,"ResetPasswordComponent"),ResetPasswordComponent.\u0275fac=__name(function(t){return new(t||ResetPasswordComponent)(core.Y36(ResetPasswordComponentService))},"ResetPasswordComponent_Factory"),ResetPasswordComponent.\u0275cmp=core.Xpm({type:ResetPasswordComponent,selectors:[["cx-reset-password"]],hostAttrs:[1,"user-form"],decls:4,vars:6,consts:[["class","overlay",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"overlay"],[3,"formGroup","ngSubmit"],[1,"label-content"],["type","password","formControlName","password",1,"form-control",3,"placeholder"],[3,"control"],["type","password","formControlName","passwordConfirm",1,"form-control",3,"placeholder"],[1,"btn","btn-block","btn-primary",3,"disabled"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,ResetPasswordComponent_cx_spinner_0_Template,1,0,"cx-spinner",0),core.ALo(1,"async"),core.YNc(2,ResetPasswordComponent_form_2_Template,18,19,"form",1),core.ALo(3,"async")),2&rf&&(core.Q6J("ngIf",core.lcZ(1,2,ctx.isUpdating$)),core.xp6(2),core.Q6J("ngIf",core.lcZ(3,4,ctx.token$)))},"ResetPasswordComponent_Template"),directives:[common.O5,spartacus_storefront.ORR,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.u,spartacus_storefront.Ahv],pipes:[common.Ov,spartacus_core.X$D],encapsulation:2,changeDetection:0});class ResetPasswordModule{}__name(ResetPasswordModule,"ResetPasswordModule"),ResetPasswordModule.\u0275fac=__name(function(t){return new(t||ResetPasswordModule)},"ResetPasswordModule_Factory"),ResetPasswordModule.\u0275mod=core.oAB({type:ResetPasswordModule}),ResetPasswordModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{ResetPasswordComponent:{component:ResetPasswordComponent,guards:[spartacus_core.aOY],providers:[{provide:ResetPasswordComponentService,useClass:ResetPasswordComponentService,deps:[spartacus_user_profile_root.LL,spartacus_core.Znh,spartacus_core.IWp]}]}}})],imports:[[common.ez,fesm2015_forms.u5,fesm2015_forms.UX,router.Bz,spartacus_core.LUR,spartacus_storefront.Fym,spartacus_storefront.Fme]]});class UpdateEmailComponentService{constructor(userEmail,routingService,globalMessageService,authService,authRedirectService){this.userEmail=userEmail,this.routingService=routingService,this.globalMessageService=globalMessageService,this.authService=authService,this.authRedirectService=authRedirectService,this.busy$=new BehaviorSubject.X(!1),this.isUpdating$=this.busy$.pipe((0,tap.b)(state=>!0===state?this.form.disable():this.form.enable())),this.form=new fesm2015_forms.cw({email:new fesm2015_forms.NI("",[fesm2015_forms.kI.required,spartacus_storefront.kal.emailValidator]),confirmEmail:new fesm2015_forms.NI("",[fesm2015_forms.kI.required]),password:new fesm2015_forms.NI("",[fesm2015_forms.kI.required])},{validators:spartacus_storefront.kal.emailsMustMatch("email","confirmEmail")})}save(){var _a,_b;if(!this.form.valid)return void this.form.markAllAsTouched();this.busy$.next(!0);const newEmail=null===(_a=this.form.get("confirmEmail"))||void 0===_a?void 0:_a.value,password=null===(_b=this.form.get("password"))||void 0===_b?void 0:_b.value;this.userEmail.update(password,newEmail).subscribe({next:()=>this.onSuccess(newEmail),error:error=>this.onError(error)})}onSuccess(newUid){this.globalMessageService.add({key:"updateEmailForm.emailUpdateSuccess",params:{newUid}},spartacus_core.xUg.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset(),this.authRedirectService.setRedirectUrl(this.routingService.getUrl({cxRoute:"home"})),this.authService.coreLogout().then(()=>{this.routingService.go({cxRoute:"login"},{state:{newUid}})})}onError(_error){this.busy$.next(!1)}}__name(UpdateEmailComponentService,"UpdateEmailComponentService"),UpdateEmailComponentService.\u0275fac=__name(function(t){return new(t||UpdateEmailComponentService)(core.LFG(spartacus_user_profile_root.PF),core.LFG(spartacus_core.Znh),core.LFG(spartacus_core.IWp),core.LFG(spartacus_core.e80),core.LFG(spartacus_core.FUY))},"UpdateEmailComponentService_Factory"),UpdateEmailComponentService.\u0275prov=core.Yz7({token:UpdateEmailComponentService,factory:UpdateEmailComponentService.\u0275fac});class UpdateEmailComponent{constructor(service){this.service=service,this.form=this.service.form,this.isUpdating$=this.service.isUpdating$}onSubmit(){this.service.save()}}__name(UpdateEmailComponent,"UpdateEmailComponent"),UpdateEmailComponent.\u0275fac=__name(function(t){return new(t||UpdateEmailComponent)(core.Y36(UpdateEmailComponentService))},"UpdateEmailComponent_Factory"),UpdateEmailComponent.\u0275cmp=core.Xpm({type:UpdateEmailComponent,selectors:[["cx-update-email"]],hostAttrs:[1,"user-form"],decls:31,vars:36,consts:[["class","overlay",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"label-content"],["type","email","name","email","formControlName","email",1,"form-control",3,"placeholder"],[3,"control"],["type","email","name","confirmEmail","formControlName","confirmEmail",1,"form-control",3,"placeholder"],["type","password","name","password","formControlName","password","autocomplete","new-password",1,"form-control",3,"placeholder"],[1,"btn","btn-block","btn-secondary",3,"routerLink"],[1,"btn","btn-block","btn-primary",3,"disabled"],[1,"overlay"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,UpdateEmailComponent_cx_spinner_0_Template,1,0,"cx-spinner",0),core.ALo(1,"async"),core.TgZ(2,"form",1),core.NdJ("ngSubmit",__name(function(){return ctx.onSubmit()},"UpdateEmailComponent_Template_form_ngSubmit_2_listener")),core.TgZ(3,"label"),core.TgZ(4,"span",2),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core._UZ(7,"input",3),core.ALo(8,"cxTranslate"),core._UZ(9,"cx-form-errors",4),core.qZA(),core.TgZ(10,"label"),core.TgZ(11,"span",2),core._uU(12),core.ALo(13,"cxTranslate"),core.qZA(),core._UZ(14,"input",5),core.ALo(15,"cxTranslate"),core._UZ(16,"cx-form-errors",4),core.qZA(),core.TgZ(17,"label"),core.TgZ(18,"span",2),core._uU(19),core.ALo(20,"cxTranslate"),core.qZA(),core._UZ(21,"input",6),core.ALo(22,"cxTranslate"),core._UZ(23,"cx-form-errors",4),core.qZA(),core.TgZ(24,"a",7),core.ALo(25,"cxUrl"),core._uU(26),core.ALo(27,"cxTranslate"),core.qZA(),core.TgZ(28,"button",8),core._uU(29),core.ALo(30,"cxTranslate"),core.qZA(),core.qZA()),2&rf&&(core.Q6J("ngIf",core.lcZ(1,15,ctx.isUpdating$)),core.xp6(2),core.Q6J("formGroup",ctx.form),core.xp6(3),core.Oqu(core.lcZ(6,17,"updateEmailForm.newEmailAddress.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(8,19,"updateEmailForm.newEmailAddress.placeholder")),core.xp6(2),core.Q6J("control",ctx.form.get("email")),core.xp6(3),core.Oqu(core.lcZ(13,21,"updateEmailForm.confirmNewEmailAddress.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(15,23,"updateEmailForm.confirmNewEmailAddress.placeholder")),core.xp6(2),core.Q6J("control",ctx.form.get("confirmEmail")),core.xp6(3),core.Oqu(core.lcZ(20,25,"updateEmailForm.password.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(22,27,"updateEmailForm.password.placeholder")),core.xp6(2),core.Q6J("control",ctx.form.get("password")),core.xp6(1),core.Q6J("routerLink",core.lcZ(25,29,core.DdM(35,_c0))),core.xp6(2),core.hij(" ",core.lcZ(27,31,"common.cancel")," "),core.xp6(2),core.Q6J("disabled",ctx.form.disabled),core.xp6(1),core.hij(" ",core.lcZ(30,33,"common.save")," "))},"UpdateEmailComponent_Template"),directives:[common.O5,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.u,spartacus_storefront.Ahv,router.yS,spartacus_storefront.ORR],pipes:[common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class UpdateEmailModule{}__name(UpdateEmailModule,"UpdateEmailModule"),UpdateEmailModule.\u0275fac=__name(function(t){return new(t||UpdateEmailModule)},"UpdateEmailModule_Factory"),UpdateEmailModule.\u0275mod=core.oAB({type:UpdateEmailModule}),UpdateEmailModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{UpdateEmailComponent:{component:UpdateEmailComponent,guards:[spartacus_core.a1M],providers:[{provide:UpdateEmailComponentService,useClass:UpdateEmailComponentService,deps:[spartacus_user_profile_root.PF,spartacus_core.Znh,spartacus_core.IWp,spartacus_core.e80,spartacus_core.FUY]}]}}})],imports:[[common.ez,fesm2015_forms.u5,fesm2015_forms.UX,spartacus_storefront.Fme,spartacus_core.bhT,router.Bz,spartacus_core.LUR,spartacus_storefront.Fym]]});class UpdatePasswordComponentService{constructor(userPasswordService,routingService,globalMessageService){this.userPasswordService=userPasswordService,this.routingService=routingService,this.globalMessageService=globalMessageService,this.busy$=new BehaviorSubject.X(!1),this.isUpdating$=this.busy$.pipe((0,tap.b)(state=>!0===state?this.form.disable():this.form.enable())),this.form=new fesm2015_forms.cw({oldPassword:new fesm2015_forms.NI("",fesm2015_forms.kI.required),newPassword:new fesm2015_forms.NI("",[fesm2015_forms.kI.required,spartacus_storefront.kal.passwordValidator]),newPasswordConfirm:new fesm2015_forms.NI("",fesm2015_forms.kI.required)},{validators:spartacus_storefront.kal.passwordsMustMatch("newPassword","newPasswordConfirm")})}updatePassword(){var _a,_b;if(!this.form.valid)return void this.form.markAllAsTouched();this.busy$.next(!0);const oldPassword=null===(_a=this.form.get("oldPassword"))||void 0===_a?void 0:_a.value,newPassword=null===(_b=this.form.get("newPassword"))||void 0===_b?void 0:_b.value;this.userPasswordService.update(oldPassword,newPassword).subscribe({next:()=>this.onSuccess(),error:error=>this.onError(error)})}onSuccess(){this.globalMessageService.add({key:"updatePasswordForm.passwordUpdateSuccess"},spartacus_core.xUg.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset(),this.routingService.go({cxRoute:"home"})}onError(_error){this.busy$.next(!1),this.form.reset()}}__name(UpdatePasswordComponentService,"UpdatePasswordComponentService"),UpdatePasswordComponentService.\u0275fac=__name(function(t){return new(t||UpdatePasswordComponentService)(core.LFG(spartacus_user_profile_root.LL),core.LFG(spartacus_core.Znh),core.LFG(spartacus_core.IWp))},"UpdatePasswordComponentService_Factory"),UpdatePasswordComponentService.\u0275prov=core.Yz7({token:UpdatePasswordComponentService,factory:UpdatePasswordComponentService.\u0275fac});class UpdatePasswordComponent{constructor(service){this.service=service,this.form=this.service.form,this.isUpdating$=this.service.isUpdating$}onSubmit(){this.service.updatePassword()}}__name(UpdatePasswordComponent,"UpdatePasswordComponent"),UpdatePasswordComponent.\u0275fac=__name(function(t){return new(t||UpdatePasswordComponent)(core.Y36(UpdatePasswordComponentService))},"UpdatePasswordComponent_Factory"),UpdatePasswordComponent.\u0275cmp=core.Xpm({type:UpdatePasswordComponent,selectors:[["cx-update-password"]],hostAttrs:[1,"user-form"],decls:31,vars:36,consts:[["class","overlay",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"label-content"],["type","password","name","oldPassword","formControlName","oldPassword",1,"form-control",3,"placeholder"],[3,"control"],["type","password","name","newPassword","formControlName","newPassword",1,"form-control",3,"placeholder"],["type","password","name","newPasswordConfirm","formControlName","newPasswordConfirm",1,"form-control",3,"placeholder"],[1,"btn","btn-block","btn-secondary",3,"routerLink"],[1,"btn","btn-block","btn-primary",3,"disabled"],[1,"overlay"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,UpdatePasswordComponent_cx_spinner_0_Template,1,0,"cx-spinner",0),core.ALo(1,"async"),core.TgZ(2,"form",1),core.NdJ("ngSubmit",__name(function(){return ctx.onSubmit()},"UpdatePasswordComponent_Template_form_ngSubmit_2_listener")),core.TgZ(3,"label"),core.TgZ(4,"span",2),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core._UZ(7,"input",3),core.ALo(8,"cxTranslate"),core._UZ(9,"cx-form-errors",4),core.qZA(),core.TgZ(10,"label"),core.TgZ(11,"span",2),core._uU(12),core.ALo(13,"cxTranslate"),core.qZA(),core._UZ(14,"input",5),core.ALo(15,"cxTranslate"),core._UZ(16,"cx-form-errors",4),core.qZA(),core.TgZ(17,"label"),core.TgZ(18,"span",2),core._uU(19),core.ALo(20,"cxTranslate"),core.qZA(),core._UZ(21,"input",6),core.ALo(22,"cxTranslate"),core._UZ(23,"cx-form-errors",4),core.qZA(),core.TgZ(24,"a",7),core.ALo(25,"cxUrl"),core._uU(26),core.ALo(27,"cxTranslate"),core.qZA(),core.TgZ(28,"button",8),core._uU(29),core.ALo(30,"cxTranslate"),core.qZA(),core.qZA()),2&rf&&(core.Q6J("ngIf",core.lcZ(1,15,ctx.isUpdating$)),core.xp6(2),core.Q6J("formGroup",ctx.form),core.xp6(3),core.Oqu(core.lcZ(6,17,"updatePasswordForm.oldPassword.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(8,19,"updatePasswordForm.oldPassword.placeholder")),core.xp6(2),core.Q6J("control",ctx.form.get("oldPassword")),core.xp6(3),core.Oqu(core.lcZ(13,21,"updatePasswordForm.newPassword.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(15,23,"updatePasswordForm.newPassword.placeholder")),core.xp6(2),core.Q6J("control",ctx.form.get("newPassword")),core.xp6(3),core.Oqu(core.lcZ(20,25,"updatePasswordForm.confirmPassword.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(22,27,"updatePasswordForm.confirmPassword.placeholder")),core.xp6(2),core.Q6J("control",ctx.form.get("newPasswordConfirm")),core.xp6(1),core.Q6J("routerLink",core.lcZ(25,29,core.DdM(35,_c0))),core.xp6(2),core.hij(" ",core.lcZ(27,31,"common.cancel")," "),core.xp6(2),core.Q6J("disabled",ctx.form.disabled),core.xp6(1),core.hij(" ",core.lcZ(30,33,"common.save")," "))},"UpdatePasswordComponent_Template"),directives:[common.O5,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.u,spartacus_storefront.Ahv,router.yS,spartacus_storefront.ORR],pipes:[common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class UpdatePasswordModule{}__name(UpdatePasswordModule,"UpdatePasswordModule"),UpdatePasswordModule.\u0275fac=__name(function(t){return new(t||UpdatePasswordModule)},"UpdatePasswordModule_Factory"),UpdatePasswordModule.\u0275mod=core.oAB({type:UpdatePasswordModule}),UpdatePasswordModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{UpdatePasswordComponent:{component:UpdatePasswordComponent,guards:[spartacus_core.a1M],providers:[{provide:UpdatePasswordComponentService,useClass:UpdatePasswordComponentService,deps:[spartacus_user_profile_root.LL,spartacus_core.Znh,spartacus_core.IWp]}]}}})],imports:[[common.ez,fesm2015_forms.u5,fesm2015_forms.UX,spartacus_storefront.Fme,spartacus_core.LUR,spartacus_storefront.Fym,spartacus_core.bhT,router.Bz]]});class UpdateProfileComponentService{constructor(userProfile,globalMessageService){this.userProfile=userProfile,this.globalMessageService=globalMessageService,this.user$=this.userProfile.get().pipe((0,filter.h)(user=>Boolean(user))),this.busy$=new BehaviorSubject.X(!1),this.isUpdating$=this.user$.pipe((0,tap.b)(user=>this.form.patchValue(user)),(0,switchMap.w)(_user=>this.busy$),(0,tap.b)(state=>!0===state?this.form.disable():this.form.enable())),this.titles$=this.userProfile.getTitles(),this.form=new fesm2015_forms.cw({customerId:new fesm2015_forms.NI(""),titleCode:new fesm2015_forms.NI(""),firstName:new fesm2015_forms.NI("",fesm2015_forms.kI.required),lastName:new fesm2015_forms.NI("",fesm2015_forms.kI.required)})}updateProfile(){this.form.valid?(this.busy$.next(!0),this.userProfile.update(this.form.value).subscribe({next:()=>this.onSuccess(),error:error=>this.onError(error)})):this.form.markAllAsTouched()}onSuccess(){this.globalMessageService.add({key:"updateProfileForm.profileUpdateSuccess"},spartacus_core.xUg.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset()}onError(_error){this.busy$.next(!1)}}__name(UpdateProfileComponentService,"UpdateProfileComponentService"),UpdateProfileComponentService.\u0275fac=__name(function(t){return new(t||UpdateProfileComponentService)(core.LFG(spartacus_user_profile_root.aT),core.LFG(spartacus_core.IWp))},"UpdateProfileComponentService_Factory"),UpdateProfileComponentService.\u0275prov=core.Yz7({token:UpdateProfileComponentService,factory:UpdateProfileComponentService.\u0275fac});class UpdateProfileComponent{constructor(service){this.service=service,this.form=this.service.form,this.isUpdating$=this.service.isUpdating$,this.titles$=this.service.titles$}onSubmit(){this.service.updateProfile()}}__name(UpdateProfileComponent,"UpdateProfileComponent"),UpdateProfileComponent.\u0275fac=__name(function(t){return new(t||UpdateProfileComponent)(core.Y36(UpdateProfileComponentService))},"UpdateProfileComponent_Factory"),UpdateProfileComponent.\u0275cmp=core.Xpm({type:UpdateProfileComponent,selectors:[["cx-update-profile"]],hostAttrs:[1,"user-form"],decls:40,vars:42,consts:[["class","overlay",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"label-content"],["formControlName","titleCode",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","name","firstName","formControlName","firstName",1,"form-control",3,"placeholder"],[3,"control"],["type","text","name","lastName","formControlName","lastName",1,"form-control",3,"placeholder"],["type","text","name","customerId","formControlName","customerId","readonly","",1,"form-control"],[1,"btn","btn-block","btn-secondary",3,"routerLink"],[1,"btn","btn-block","btn-primary",3,"disabled"],[1,"overlay"],[3,"value"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,UpdateProfileComponent_cx_spinner_0_Template,1,0,"cx-spinner",0),core.ALo(1,"async"),core.TgZ(2,"form",1),core.NdJ("ngSubmit",__name(function(){return ctx.onSubmit()},"UpdateProfileComponent_Template_form_ngSubmit_2_listener")),core.TgZ(3,"label"),core.TgZ(4,"span",2),core._uU(5),core.ALo(6,"cxTranslate"),core.qZA(),core.TgZ(7,"select",3),core.TgZ(8,"option",4),core._uU(9),core.ALo(10,"cxTranslate"),core.qZA(),core.YNc(11,UpdateProfileComponent_option_11_Template,2,2,"option",5),core.ALo(12,"async"),core.qZA(),core.qZA(),core.TgZ(13,"label"),core.TgZ(14,"span",2),core._uU(15),core.ALo(16,"cxTranslate"),core.qZA(),core._UZ(17,"input",6),core.ALo(18,"cxTranslate"),core._UZ(19,"cx-form-errors",7),core.qZA(),core.TgZ(20,"label"),core.TgZ(21,"span",2),core._uU(22),core.ALo(23,"cxTranslate"),core.qZA(),core._UZ(24,"input",8),core.ALo(25,"cxTranslate"),core._UZ(26,"cx-form-errors",7),core.qZA(),core.TgZ(27,"label"),core.TgZ(28,"span",2),core._uU(29),core.ALo(30,"cxTranslate"),core.qZA(),core._UZ(31,"input",9),core._UZ(32,"cx-form-errors",7),core.qZA(),core.TgZ(33,"a",10),core.ALo(34,"cxUrl"),core._uU(35),core.ALo(36,"cxTranslate"),core.qZA(),core.TgZ(37,"button",11),core._uU(38),core.ALo(39,"cxTranslate"),core.qZA(),core.qZA()),2&rf&&(core.Q6J("ngIf",core.lcZ(1,17,ctx.isUpdating$)),core.xp6(2),core.Q6J("formGroup",ctx.form),core.xp6(3),core.Oqu(core.lcZ(6,19,"updateProfileForm.title")),core.xp6(4),core.Oqu(core.lcZ(10,21,"updateProfileForm.none")),core.xp6(2),core.Q6J("ngForOf",core.lcZ(12,23,ctx.titles$)),core.xp6(4),core.Oqu(core.lcZ(16,25,"updateProfileForm.firstName.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(18,27,"updateProfileForm.firstName.placeholder")),core.xp6(2),core.Q6J("control",ctx.form.get("firstName")),core.xp6(3),core.Oqu(core.lcZ(23,29,"updateProfileForm.lastName.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(25,31,"updateProfileForm.lastName.placeholder")),core.xp6(2),core.Q6J("control",ctx.form.get("lastName")),core.xp6(3),core.Oqu(core.lcZ(30,33,"updateProfileForm.customerId")),core.xp6(3),core.Q6J("control",ctx.form.get("lastName")),core.xp6(1),core.Q6J("routerLink",core.lcZ(34,35,core.DdM(41,_c0))),core.xp6(2),core.hij(" ",core.lcZ(36,37,"common.cancel")," "),core.xp6(2),core.Q6J("disabled",ctx.form.disabled),core.xp6(1),core.hij(" ",core.lcZ(39,39,"common.save")," "))},"UpdateProfileComponent_Template"),directives:[common.O5,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.EJ,fesm2015_forms.JJ,fesm2015_forms.u,fesm2015_forms.YN,fesm2015_forms.Kr,common.sg,fesm2015_forms.Fj,spartacus_storefront.Ahv,router.yS,spartacus_storefront.ORR],pipes:[common.Ov,spartacus_core.X$D,spartacus_core.l2T],encapsulation:2,changeDetection:0});class UpdateProfileModule{}__name(UpdateProfileModule,"UpdateProfileModule"),UpdateProfileModule.\u0275fac=__name(function(t){return new(t||UpdateProfileModule)},"UpdateProfileModule_Factory"),UpdateProfileModule.\u0275mod=core.oAB({type:UpdateProfileModule}),UpdateProfileModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({cmsComponents:{UpdateProfileComponent:{component:UpdateProfileComponent,guards:[spartacus_core.a1M],providers:[{provide:UpdateProfileComponentService,useClass:UpdateProfileComponentService,deps:[spartacus_user_profile_root.aT,spartacus_core.IWp]}]}}})],imports:[[common.ez,fesm2015_forms.u5,fesm2015_forms.UX,spartacus_storefront.Fme,spartacus_core.LUR,spartacus_storefront.Fym,router.Bz,spartacus_core.bhT]]});class UserProfileComponentsModule{}__name(UserProfileComponentsModule,"UserProfileComponentsModule"),UserProfileComponentsModule.\u0275fac=__name(function(t){return new(t||UserProfileComponentsModule)},"UserProfileComponentsModule_Factory"),UserProfileComponentsModule.\u0275mod=core.oAB({type:UserProfileComponentsModule}),UserProfileComponentsModule.\u0275inj=core.cJS({imports:[[RegisterComponentModule,UpdateProfileModule,UpdateEmailModule,UpdatePasswordModule,ForgotPasswordModule,ResetPasswordModule,CloseAccountModule]]});var take=__webpack_require__(5257),spartacus_user_account_root=__webpack_require__(5334),ngrx_store=__webpack_require__(6710);const USER_PROFILE_NORMALIZER=new core.OlP("UserProfileNormalizer"),USER_PROFILE_SERIALIZER=new core.OlP("UserProfileSerializer"),USER_SIGN_UP_SERIALIZER=(new core.OlP("UserSerializer"),new core.OlP("UserSignUpSerializer")),TITLE_NORMALIZER=new core.OlP("TitleNormalizer");class UserProfileAdapter{}__name(UserProfileAdapter,"UserProfileAdapter");class UserProfileConnector{constructor(userProfileAdapter){this.userProfileAdapter=userProfileAdapter}update(username,user){return this.userProfileAdapter.update(username,user)}register(user){return this.userProfileAdapter.register(user)}registerGuest(guid,password){return this.userProfileAdapter.registerGuest(guid,password)}requestForgotPasswordEmail(userEmailAddress){return this.userProfileAdapter.requestForgotPasswordEmail(userEmailAddress)}resetPassword(token,newPassword){return this.userProfileAdapter.resetPassword(token,newPassword)}updateEmail(userId,currentPassword,newUserId){return this.userProfileAdapter.updateEmail(userId,currentPassword,newUserId)}updatePassword(userId,oldPassword,newPassword){return this.userProfileAdapter.updatePassword(userId,oldPassword,newPassword)}remove(userId){return this.userProfileAdapter.close(userId)}getTitles(){return this.userProfileAdapter.loadTitles()}}__name(UserProfileConnector,"UserProfileConnector"),UserProfileConnector.\u0275fac=__name(function(t){return new(t||UserProfileConnector)(core.LFG(UserProfileAdapter))},"UserProfileConnector_Factory"),UserProfileConnector.\u0275prov=core.Yz7({token:UserProfileConnector,factory:UserProfileConnector.\u0275fac});class UserEmailService{constructor(userIdService,userProfileConnector,command){this.userIdService=userIdService,this.userProfileConnector=userProfileConnector,this.command=command,this.updateCommand=this.command.create(payload=>this.userIdService.takeUserId(!0).pipe((0,switchMap.w)(uid=>this.userProfileConnector.updateEmail(uid,payload.password,payload.newUid))),{strategy:spartacus_core.flE.Queue})}update(password,newUid){return this.updateCommand.execute({password,newUid})}}__name(UserEmailService,"UserEmailService"),UserEmailService.\u0275fac=__name(function(t){return new(t||UserEmailService)(core.LFG(spartacus_core.XBV),core.LFG(UserProfileConnector),core.LFG(spartacus_core.VDr))},"UserEmailService_Factory"),UserEmailService.\u0275prov=core.Yz7({token:UserEmailService,factory:UserEmailService.\u0275fac});class UserPasswordService{constructor(userProfileConnector,userIdService,command){this.userProfileConnector=userProfileConnector,this.userIdService=userIdService,this.command=command,this.updateCommand=this.command.create(payload=>this.userIdService.takeUserId(!0).pipe((0,take.q)(1),(0,switchMap.w)(uid=>this.userProfileConnector.updatePassword(uid,payload.oldPassword,payload.newPassword)))),this.resetCommand=this.command.create(payload=>this.userProfileConnector.resetPassword(payload.token,payload.password)),this.requestForgotPasswordEmailCommand=this.command.create(payload=>this.userProfileConnector.requestForgotPasswordEmail(payload.email))}update(oldPassword,newPassword){return this.updateCommand.execute({oldPassword,newPassword})}reset(token,password){return this.resetCommand.execute({token,password})}requestForgotPasswordEmail(email){return this.requestForgotPasswordEmailCommand.execute({email})}}__name(UserPasswordService,"UserPasswordService"),UserPasswordService.\u0275fac=__name(function(t){return new(t||UserPasswordService)(core.LFG(UserProfileConnector),core.LFG(spartacus_core.XBV),core.LFG(spartacus_core.VDr))},"UserPasswordService_Factory"),UserPasswordService.\u0275prov=core.Yz7({token:UserPasswordService,factory:UserPasswordService.\u0275fac});class UserProfileService{constructor(userAccountService,authService,userProfileConnector,eventService,userIdService,query,command){this.userAccountService=userAccountService,this.authService=authService,this.userProfileConnector=userProfileConnector,this.eventService=eventService,this.userIdService=userIdService,this.query=query,this.command=command,this.updateCommand=this.command.create(payload=>this.userIdService.takeUserId(!0).pipe((0,switchMap.w)(uid=>this.userProfileConnector.update(uid,payload.details).pipe((0,tap.b)(()=>{this.eventService.dispatch({user:payload.details},spartacus_user_account_root.x7)})))),{strategy:spartacus_core.flE.Queue}),this.closeCommand=this.command.create(()=>this.userIdService.takeUserId(!0).pipe((0,switchMap.w)(uid=>this.userProfileConnector.remove(uid).pipe((0,tap.b)(()=>this.authService.logout()))))),this.titleQuery=this.query.create(()=>this.userProfileConnector.getTitles(),{reloadOn:[spartacus_core.QRE]})}get(){return this.userAccountService.get()}update(details){return this.updateCommand.execute({details})}close(){return this.closeCommand.execute(void 0)}getTitles(){return this.titleQuery.get().pipe((0,map.U)(titles=>null!=titles?titles:[]))}}__name(UserProfileService,"UserProfileService"),UserProfileService.\u0275fac=__name(function(t){return new(t||UserProfileService)(core.LFG(spartacus_user_account_root.gf),core.LFG(spartacus_core.e80),core.LFG(UserProfileConnector),core.LFG(spartacus_core.POd),core.LFG(spartacus_core.XBV),core.LFG(spartacus_core._7J),core.LFG(spartacus_core.VDr))},"UserProfileService_Factory"),UserProfileService.\u0275prov=core.Yz7({token:UserProfileService,factory:UserProfileService.\u0275fac});class UserRegisterService{constructor(userProfile,userConnector,authService,command,store){this.userProfile=userProfile,this.userConnector=userConnector,this.authService=authService,this.command=command,this.store=store,this.registerCommand=this.command.create(({user})=>this.userConnector.register(user).pipe((0,tap.b)(()=>{this.store.dispatch(new spartacus_core.EJN.RegisterUserSuccess)}))),this.registerGuestCommand=this.command.create(payload=>this.userConnector.registerGuest(payload.guid,payload.password).pipe((0,tap.b)(user=>{this.authService.loginWithCredentials(user.uid,payload.password)})))}register(user){return this.registerCommand.execute({user})}registerGuest(guid,password){return this.registerGuestCommand.execute({guid,password})}getTitles(){return this.userProfile.getTitles()}}__name(UserRegisterService,"UserRegisterService"),UserRegisterService.\u0275fac=__name(function(t){return new(t||UserRegisterService)(core.LFG(UserProfileService),core.LFG(UserProfileConnector),core.LFG(spartacus_core.e80),core.LFG(spartacus_core.VDr),core.LFG(ngrx_store.yh))},"UserRegisterService_Factory"),UserRegisterService.\u0275prov=core.Yz7({token:UserRegisterService,factory:UserRegisterService.\u0275fac});const facadeProviders=[UserEmailService,UserPasswordService,UserProfileService,UserRegisterService,{provide:spartacus_user_profile_root.PF,useExisting:UserEmailService},{provide:spartacus_user_profile_root.LL,useExisting:UserPasswordService},{provide:spartacus_user_profile_root.aT,useExisting:UserProfileService},{provide:spartacus_user_profile_root.zm,useExisting:UserRegisterService}];class UserProfileCoreModule{}__name(UserProfileCoreModule,"UserProfileCoreModule"),UserProfileCoreModule.\u0275fac=__name(function(t){return new(t||UserProfileCoreModule)},"UserProfileCoreModule_Factory"),UserProfileCoreModule.\u0275mod=core.oAB({type:UserProfileCoreModule}),UserProfileCoreModule.\u0275inj=core.cJS({providers:[UserProfileConnector,...facadeProviders]});var http=__webpack_require__(1841),throwError=__webpack_require__(205),catchError=__webpack_require__(5304);class OccUserProfileAdapter{constructor(http2,occEndpoints,converter){this.http=http2,this.occEndpoints=occEndpoints,this.converter=converter}update(userId,user){const endpoint=this.occEndpoints.isConfigured("userUpdateProfile")?"userUpdateProfile":"user",url=this.occEndpoints.buildUrl(endpoint,{urlParams:{userId}});return user=this.converter.convert(user,USER_PROFILE_SERIALIZER),this.http.patch(url,user).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))))}register(user){const url=this.occEndpoints.buildUrl("userRegister");let headers=new http.WM({"Content-Type":"application/json"});return headers=spartacus_core.Fox.createHeader(spartacus_core._Re,!0,headers),user=this.converter.convert(user,USER_SIGN_UP_SERIALIZER),this.http.post(url,user,{headers}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),this.converter.pipeable(USER_PROFILE_NORMALIZER))}registerGuest(guid,password){const url=this.occEndpoints.buildUrl("userRegister");let headers=new http.WM({"Content-Type":"application/x-www-form-urlencoded"});headers=spartacus_core.Fox.createHeader(spartacus_core._Re,!0,headers);const httpParams=(new http.LE).set("guid",guid).set("password",password);return this.http.post(url,httpParams,{headers}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),this.converter.pipeable(USER_PROFILE_NORMALIZER))}requestForgotPasswordEmail(userEmailAddress){const url=this.occEndpoints.buildUrl("userForgotPassword"),httpParams=(new http.LE).set("userId",userEmailAddress);let headers=new http.WM({"Content-Type":"application/x-www-form-urlencoded"});return headers=spartacus_core.Fox.createHeader(spartacus_core._Re,!0,headers),this.http.post(url,httpParams,{headers}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))))}resetPassword(token,newPassword){const url=this.occEndpoints.buildUrl("userResetPassword");let headers=new http.WM({"Content-Type":"application/json"});return headers=spartacus_core.Fox.createHeader(spartacus_core._Re,!0,headers),this.http.post(url,{token,newPassword},{headers}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))))}updateEmail(userId,currentPassword,newUserId){const url=this.occEndpoints.buildUrl("userUpdateLoginId",{urlParams:{userId}}),httpParams=(new http.LE).set("password",currentPassword).set("newLogin",newUserId),headers=new http.WM({"Content-Type":"application/x-www-form-urlencoded"});return this.http.put(url,httpParams,{headers}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))))}updatePassword(userId,oldPassword,newPassword){const url=this.occEndpoints.buildUrl("userUpdatePassword",{urlParams:{userId}}),httpParams=(new http.LE).set("old",oldPassword).set("new",newPassword),headers=new http.WM({"Content-Type":"application/x-www-form-urlencoded"});return this.http.put(url,httpParams,{headers}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))))}close(userId){const endpoint=this.occEndpoints.isConfigured("userCloseAccount")?"userCloseAccount":"user",url=this.occEndpoints.buildUrl(endpoint,{urlParams:{userId}});return this.http.delete(url).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))))}loadTitles(){const url=this.occEndpoints.buildUrl("titles");return this.http.get(url).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error))),(0,map.U)(titleList=>{var _a;return null!==(_a=titleList.titles)&&void 0!==_a?_a:[]}),this.converter.pipeableMany(TITLE_NORMALIZER))}}__name(OccUserProfileAdapter,"OccUserProfileAdapter"),OccUserProfileAdapter.\u0275fac=__name(function(t){return new(t||OccUserProfileAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"OccUserProfileAdapter_Factory"),OccUserProfileAdapter.\u0275prov=core.Yz7({token:OccUserProfileAdapter,factory:OccUserProfileAdapter.\u0275fac});class UserProfileOccModule{}__name(UserProfileOccModule,"UserProfileOccModule"),UserProfileOccModule.\u0275fac=__name(function(t){return new(t||UserProfileOccModule)},"UserProfileOccModule_Factory"),UserProfileOccModule.\u0275mod=core.oAB({type:UserProfileOccModule}),UserProfileOccModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({backend:{occ:{endpoints:{userRegister:"users",userForgotPassword:"forgottenpasswordtokens",userResetPassword:"resetpassword",userUpdateLoginId:"users/${userId}/login",userUpdatePassword:"users/${userId}/password",titles:"titles"}}}}),{provide:UserProfileAdapter,useClass:OccUserProfileAdapter}]});class UserProfileModule{}__name(UserProfileModule,"UserProfileModule"),UserProfileModule.\u0275fac=__name(function(t){return new(t||UserProfileModule)},"UserProfileModule_Factory"),UserProfileModule.\u0275mod=core.oAB({type:UserProfileModule}),UserProfileModule.\u0275inj=core.cJS({imports:[[UserProfileCoreModule,UserProfileOccModule,UserProfileComponentsModule]]})}};